Linux系统上对文件的权限有着严格的控制，如果想对某个文件执行某种操作，必须具有对应的权限方可执行成功。

Linux中权限基于UGO模型进行控制

- u:代表user(用户)
- g:代表group(组)
- o:代表other(其他)

通常情况下，一个文件只能归属于一个用户和组， 如果其它的用户想有这个文件的权限，则可以将该用户加入具备权限的群组，一个用户可以同时归属于多个组。

```
[root@ctos3 ~]# ls -ld test
drwxr-xr-- 2 root root 6 Mar 9 01:37 test
```

文件类型分为：

- d代表目录
- c代表字符型文件
- l代表链接文件
- s代表套接字
- p代表管道

权限分为：

- r(read)读权限， 可以读取文件内容，可以列出目录内容 用数字表示为4
- w(write)写权限， 可以修改文件内容，可以在目录中创建删除文件 用数字表示为2
- x(excute)执行权限，可以作为命令执行，可以访问目录内容 用数字表示为1

rwx = 4 + 2 + 1 = 7

rw = 4 + 2 = 6

rx = 4 +1 = 5

## 修改权限

**修改文件权限**

```bash
# 设置所有用户可读
chmod ugo+r a.conf

# 设置 c.sh 只有 拥有者可以读写及执行
chmod u+rwx c.sh

# 设置所有人可以读写及执行
chmod 777 file
chmod u=rwx,g=rwx,o=rwx file
chmod a=rwx file

# 设置当前目录下的所有档案与子目录皆设为任何人可读写
chmod -R a+rw *
```

**修改文件拥有者**

一般只有系统管理员(root)拥有此操作权限，而普通用户则没有权限将自己或者别人的文件的拥有者设置为别人。

```bash
# 设置文件 d.key、e.scrt的拥有者设为 users组的 tom
chown tom:users file d.key e.scrt
```

## 默认权限

每一个终端都拥有一个umask属性，来确定新建文件、文件夹的默认权限

/etc/profile文件可以看到设置的umask值

```bash
if [ $UID -gt 199 ] && [ "/usr/bin/id -gn" = "/usr/bin/id -un" ]; then
umask 002
else
umask 022
fi
```

解释：如果UID大于199并且用户的组名和用户名一样，umask值为002（即普通用户），否则就为022（即root用户）。gt在shell脚本中是大于，id -gn:显示组名，id -un:显示用户名

`文件（或目录）的初始权限 = 文件（或目录）的最大默认权限 - umask权限`。

1. 对文件来讲，其可拥有的最大默认权限是 666，即 rw-rw-rw-。执行权限是文件的最高权限，赋予时绝对要慎重，因此绝不能在新建文件的时候就默认赋予，只能通过用户手工赋予。
2. 对目录来讲，其可拥有的最大默认权限是 777，即 rwxrwxrwx。

因此，UID小于199并且用户的组名和用户名一样，目录创建的默认权限为777-umask 就是755。文件创建的默认权限为777-umask 就是644